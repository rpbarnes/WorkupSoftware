\documentclass[10pt]{book}
\newif\ifshowall
\showalltrue
%\showallfalse
%\documentclass[twocolumn,nofootinbib]{revtex4}
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{mynotebook}
%\usepackage[english,greek]{babel}
\synctex=1
%DIF PREAMBLE EXTENSION ADDED BY LATEXDIFF
%DIF UNDERLINE PREAMBLE %DIF PREAMBLE
\RequirePackage[normalem]{ulem} %DIF PREAMBLE
\RequirePackage{color}\definecolor{RED}{rgb}{1,0,0}\definecolor{BLUE}{rgb}{0,0,1} %DIF PREAMBLE
%\providecommand{\DIFadd}[1]{\begingroup\protect\color{blue}\uwave{#1}\endgroup} %DIF PREAMBLE
\providecommand{\DIFadd}[1]{#1} %DIF PREAMBLE
%\providecommand{\DIFdel}[1]{\begingroup\protect\color{red}\sout{#1}\endgroup}                      %DIF PREAMBLE
\providecommand{\DIFdel}[1]{#1}                      %DIF PREAMBLE
%DIF SAFE PREAMBLE %DIF PREAMBLE
\providecommand{\DIFaddbegin}{\color{blue}} %DIF PREAMBLE
\providecommand{\DIFaddend}{\color{black}} %DIF PREAMBLE
\providecommand{\DIFdelbegin}{} %DIF PREAMBLE
\providecommand{\DIFdelend}{} %DIF PREAMBLE
%DIF FLOATSAFE PREAMBLE %DIF PREAMBLE
\providecommand{\DIFaddFL}[1]{\DIFadd{#1}} %DIF PREAMBLE
\providecommand{\DIFdelFL}[1]{\DIFdel{#1}} %DIF PREAMBLE
\providecommand{\DIFaddbeginFL}{} %DIF PREAMBLE
\providecommand{\DIFaddendFL}{} %DIF PREAMBLE
\providecommand{\DIFdelbeginFL}{} %DIF PREAMBLE
\providecommand{\DIFdelendFL}{} %DIF PREAMBLE
%DIF END PREAMBLE EXTENSION ADDED BY LATEXDIFF
\usepackage[nolandscape]{mylists}

\author{Ryan Barnes}
\title{ODNP Workup Software}
\date{\today}
\begin{document}
\maketitle
\section{Introduction}
This guide outlines, in very rough detail, the how to of operating the ODNP workup software with python. Right now this is fairly unorganized but I would appreciate your help in making this work towards what you need it for. 

\section{Guide to Running the Workup Code}
Put instructions here for running the workup code. Initially go through the answers for the query statements, especially how to enter the dnp and t1 exp numbers. Then go through exceptions and how the user should use the command line to remedy the situation.

\section{Database Information}
I'm using mongodb to database all the worked up data according to a hierarchical scheme. This will allow a user to search the database for entries based on certain parameters. 

Currently the search headings include:
\begin{enumerate}
    \item \o{operator} - this is the experimenter's name e.g. Ryan Barnes.
    \item \o{date} - this is the date of the experiment
    \item \o{setType} - this is the data set type e.g. (kSigma, T1Series, enhancementSeries, T10)
    \item \o{macroMolecule} - this is the macromolecule in the sample e.g. protein, liposome. \o[If there is no macromolecule this is set to none.]{} 
    \item \o{bindingPartner} - this is the other macromolecule in sample that is not spin labeled. \o[If there is no other macromolecule in the sample this is set to none.]{} 
    \item \o{concentration} - this is the concentration of the \o{macroMolecule}, this assumes the spin label is the same concentration.
    \item \o{temperature(K)} - this is the temperature of the experiment set in Kelvin.
    \item \o{solvent} - this is the solvent for the experiment.
    \item \o{osmolyte} - This might be nice for Jinsuk for now this isn't used.
    \item \o{aggregationAgent} - this is more a place holder for experiments with the tau protein.
\end{enumerate}


\section{Development:}
\subsection{New Implementations:}
\begin{enumerate}
    \item $\Box$ Make it so the notebook shows the operators name, not mine. \o[I don't think this is going to work like it should. Something weird with the latex package calls. Right now it just says Han Lab Notebook.]
    \item $\Box$ system calls that handle both windows and mac both in naming the file type and in compiling the pdf.
    \item $\Box$ Make a way to reload the freshly produced pdf. Mac will work with preview (you just need to set to use preview by default). Windows should work with Sumatra pdf --> This seems to work for mac nicely, need to add windows features now.
    \item $\Box$ Axis labels in the last plots generated by the code. This is important for kSigma because you want to give the appropriate units!
    \item $\Box$ You should make it so that the database dictionary keys are pulled from the live database and fill in the key values from the default file in the directory. Or keep a copy of the directory keys and if the current keys are different than the directory keys just update the directory keys. \o[It looks like you will have to home roll a function to print all keys.]{}
    \item $\checkmark$ When entering database values you should list all possible choices for the given key. Use '.distinct('keyValue')'. \o[You should make it so the database values that are returned are operator specific.]{}
    \item $\Box$ Add handlers for mistyped answers so program does not crash. Just say do not understand and re loop through the question in a while loop. \o[This still needs done for the error handling functions.]{}
    \item $\checkmark$ Change the experimental parameters queries to dynamic type like the database queries \o[This should be thoroughly debugged, it's not right now which might be a problem.]{This actually seems to work nicely now.}
    \item $\Box$ Newton's method to find starting guess for T1 experiments. For now the t1StartingGuess works 
    \item $\Box$ Write out instructions for how to use the software and common bug issues and code shots
    \item $\checkmark$ Make a way to force an experiment time for diving up the powers files \o[I pull the experiment time from the Bruker output and set this as the minimum experiment time. If the experiment is successful the workup software should work fine dividing up the powers.]{}
    \item $\Box$ You should calculate the experiment time from the Bruker timing function and hand this with an associated arror to the 'returnSplitPowers' function.
\end{enumerate}
\subsection{Bugs:}
\begin{enumerate}
    \item $\checkmark$ 131115_tempcont_dnp_9_58GHz_jss gave power series error, it looks like the time steps are really off. \o[This is actually just a broken experiment.]{No need to adjust code to handle this. I did add functionality to the powers dividing function to drop the first number of time values with 'timeDropStart' and I also added a maximum experiment time as 'expTimeMax'. It might be worth adding debugging functionality to plot the time series and also show the time values of the spikes, this way the experimenter can pick out the values nicely.}
    \item $\Box$ 140509_200uM_OHT_ODNP gave an error because a glitch occuring early. You should add a way to throw away values that occur before a certain time.
    \item $\Box$ 140728_CheY_CtermP6C_400uM_ODNP_Repeat2 this throws an error because it can't line up the enhancement series and the powers file
    \item $\Box$ When code crashes due to not lining up the powers file with enhancemnet or $T_1$ series. The powers file is not returned in a csv.
    \item $\Box$ You need to add wrong answer handling to the power series exception handlers.
\end{enumerate}
\subsection{Methods to Implement:}
\begin{enumerate}
    \item $\Box$ Wrap method of saving the nddata sets to mongo database
    \item $\Box$ Method for print statement headers
\end{enumerate}
\section{Windows Install}
\begin{enumerate}
    \item Download \& install 'python xy'
    \item Download \& install 'git'

\end{enumerate}
\section{EPR Integral Workup}
Is this necessary for the ODNP? It might be nice to do this as standard this way you can tell if the double integrals are the same. \o[This is a future idea.]

\end{document}
